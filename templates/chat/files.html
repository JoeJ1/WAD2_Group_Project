{% extends 'chat/chattemplates.html'%}
{% load staticfiles %}

{% block title_block %}
    Files
{% endblock %}

{% block content_title %}
<nav class="navbar bg-tertiary w-100">
  <div class="container-fluid">
      <h2 class="text-light" href="#">{{chat_name}} - Files</h2>
    <div class="d-flex" id="navbarText">
      <ul class="navbar-nav flex-row me-auto mb-2 mb-lg-0">
        <li class="nav-item">
            <a class="nav-link active text-light" aria-current="page" href="{% url 'chat:chatroom' chat_name_slug%}">Home</a>
        </li>
        <li class="nav-item">
            <a class="nav-link text-light" href="{% url 'chat:members' chat_name_slug %}">Members</a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-light" href="{% url 'chat:files' chat_name_slug %}">Files</a>
        </li>
{% if current_user == owner %}
        <li class="nav-item">
          <a class="nav-link text-light" href="{% url 'chat:delete' chat_name_slug %}">Delete</a>
        </li>
{% else %}
        <li class="nav-item">
          <a class="nav-link text-light" href="{% url 'chat:leave' chat_name_slug %}">Leave</a>
        </li>
{% endif %}
      </ul>
    </div>
  </div>
</nav>
{% endblock %}

{% block content_block %}
{% if current_user == owner %}
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="Submit" class ="btn btn-secondary" />
</form>

{% endif %}
{% if files %}
    {% for file in files %}
        <p>
            {{ file }}
            <a href="{{ MEDIA_URL }}{{ file.data }}" download>Download</a>
        </p>
    {% endfor %}
{% else %}
    There are currently no files.
{% endif %}
{% endblock %}
